language: node_js
node_js:
- lts/*
install: |-
  npm ci
  npm install -g codecov
script: |-
  npm run build
  ./node_modules/.bin/nyc report --reporter lcovonly -- -R spec
  codecov
  log=$(git log $TRAVIS_COMMIT_RANGE --oneline)
  echo $'**Change log:**<br/>'${log//$'\n'/<br/>}
branches:
  only:
    - master
before_deploy: |-
  log=$(git log $TRAVIS_COMMIT_RANGE --oneline)
  export BODY=$'**Change log:**<br/>'${log//$'\n'/<br/>}
deploy:
  - provider: releases
    skip_cleanup: true
    api_key:
      secure: hYm3aKpIA4vxI+kQMK6WTGSglefIxyffjBU6xeWa7tBiVJb4YrJHOiFMvI43zW3ypP/FeW16iWP57FADfxYxI3yyY8d19qY+HzBClFY6TWScz0nK6eX0mlbWkz9KxxtjVEar461k4lxYQA8L5lqnaH/AiG0vlZqycnWIV0sB+zQF1KINoSf7ZnSHpzkto36sQYEcamSlNp7aZ5fnHpyt70/ZLqwzf6qP+b6miIc91Cwcu1ahHPo1Tv0K8yznxDAKbmVEa4pxo/y3LT1IMsHDWtSbo6BVJQDbvp5pCGmL8nqlLwQsMMRjvhk5qcq0Yf/YK0MqJ9QIYGAn48tjl+RqeHanXd4NTqGGGRHOtS/1kBJuUfZz6qIvZwe6v3XwoYh32KAaiN/dc7PWMvZ6Sm44BqZaIxxfGvPDSvuEMy1nIBONk9OjS4uwoQg//tAzPZyB3TkQ67zscH1TKIiwk7A6lDTzwS/b2Un5jOlzkWY0WvGbw9KHlfx2tdZGYauHLurDs19/IU149H3H+srqhymB1JwrPkCMP2VVwyYqygi15vQ6zexiN7nja+5J816hmJgzCiEfdmxfAdFe9qatyrrGmqS3jL9gHzwxCxngSMF91VfMG9DZ4kPvvlf+DDLn7HyAEigxUopiZoHv7mcejEzbP57wIArtqA+shXh0eSyc+6U=
    file: README.md
    name: Release $TRAVIS_COMMIT_MESSAGE
    tag_name: $TRAVIS_COMMIT_MESSAGE
    body: $BODY
    on:
      repo: Guseyn/wall
      branch:
        - master
      condition: $TRAVIS_COMMIT_MESSAGE =~ ^([0-9]{1,3}).([0-9]{1,3}).([0-9]{1,3})$
  - provider: npm
    email: guseynism@gmail.com
    api_key:
      secure: ABUJTISTkTVxqJjwZKcrQWvd9akLvDHqnluDM2xYmpVW/xlY6LKX95Ikf/gX98jz9YFiYP4AEmuDJuaMvA30/dxAB1X0eJgYl2HygS5CpXUp0r2aNfmSSALgaoj+ZN8pjnCj7tAiyNSfEeXGVkHvPjWGnbDGxvsn7OzXSUuNMUU26b96y9wKUYTC2FeyZIPsD40LNcUAmiPwf6t7ffrUcE9+7DHzVNRrsVNzlYTcRlSBmjSjiGhrUdqGMugPJqHqy9aTlSpQzmTlEr2N5nTfSvvORBrIGGmF5AeK2+UF6ifyhMpq2twXPRXXb6+xC4McA1Cp1w51ZfpPMnmd8Ad1EgxmDsWwym2+u2Ci7jEhYV7ZGag1+kzpQkuQDUkxKNnmTgPOZjPmyyGELBCF+aI4RkPP5rIrec3xrO/pUsVJ2PYoED38sLSjyzz5nfuOX7Xy0bmNkAITBC1NRcdsql7xZnVAPjamEVhO2dw9iNZAFX6aqCNypmwOT8JYNCfO7e8gfeQEDgc71qJihDXtnUUQiM+6K9DZ1KIi+oeO/GKnFtBCkjpgDwGtuW4RffDlV42oQyaWHUBIFKgJqQf0rv1oEAu7DBJJxUImRvv4i41VBzxxQm98XtmgrWeWVQ7yl004SbQJt24nGkREAvSdP2aOOnkkgaYwBZgiNz4Hnx4l6G4=
    on:
      repo: Guseyn/wall
      branch:
        - master
      condition: $TRAVIS_COMMIT_MESSAGE =~ ^([0-9]{1,3}).([0-9]{1,3}).([0-9]{1,3})$
